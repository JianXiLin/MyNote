> è®°å½•dockerçš„åŸºæœ¬å‘½ä»¤ï¼ŒåŒ…æ‹¬é•œåƒã€å®¹å™¨ç›¸å…³å‘½ä»¤ä»¥åŠå…¶å®ƒå¸¸ç”¨å‘½ä»¤ã€‚

![docker/20200613160502](https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/docker/20200613160502.png?x-oss-process=image/resize,p_100/sharpen,50)

```puml
@startmindmap
+ åŸºæœ¬å‘½ä»¤
++ åŸºæœ¬ä¿¡æ¯
+++_ **version**
+++_ **info**
+++_ **--help**
++ é•œåƒ
+++_ **images**     #æŸ¥çœ‹é•œåƒ;
+++_ **search**
+++_ **pull**
+++_ **rmi**
++ å®¹å™¨
+++_ **run**
++++_ **-v**
++++_ **-net**
++++_ **--link**
++++_ ****

+++_ **exit**
+++_ **ps**      #æŸ¥çœ‹å®¹å™¨
+++_ **rm**
+++_ **startã€stopã€restartã€kill**
++ å…¶å®ƒå¸¸ç”¨
+++_ **logs**
+++_ **top**          #æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹
+++_ **inspect**   #æŸ¥çœ‹å®¹å™¨å…ƒæ•°æ®
+++_ **attach**     #è¿›å…¥å½“å‰ç»ˆç«¯
+++_ **exec**       #è¿›å…¥æ–°ç»ˆç«¯
+++_ **cp**           #å¤åˆ¶æ–‡ä»¶:å®¹å™¨=>ä¸»æœº
+++_ **commit**

@endmindmap
```

> è¡¥å……ï¼š
> å¯åŠ¨docker : systemctl start docker
> dockerHub : <https://hub.docker.com/>

## 1. ä¿¡æ¯

ğŸ”¹ <b>æŸ¥çœ‹ç‰ˆæœ¬</b>

<b>docker version</b>

ğŸ”¹ <b>æŸ¥çœ‹ä¿¡æ¯</b>

<b>docker info</b>

ğŸ”¹ <b>å¸®åŠ©ä¿¡æ¯</b>

<b>docker --help</b>

ğŸ”¹ <b>çŠ¶æ€ä¿¡æ¯</b>

<b>docker stats å®¹å™¨id</b>

![2020-06-13-11-02-32](./imgs/åŸºæœ¬å‘½ä»¤.md/2020-06-13-11-02-32.png)

## 2. é•œåƒ

ğŸ”¹ <b>æŸ¥çœ‹æ‰€æœ‰</b>

<b>docker images</b>

    -a : æ˜¾ç¤ºæ‰€æœ‰
    -q : åªæ˜¾ç¤ºid
    -f : è¿‡æ»¤

```shell
docker images -aq
```

ğŸ”¹ <b>æœç´¢</b>

<b>docker search å…³é”®å­—</b>

    --filter : è¿‡æ»¤

```shell
docker search mysql --filter=STARS=3000
```

ğŸ”¹ <b>ä¸‹è½½</b>

<b>docker pull é•œåƒåç§°[:tag]</b>

```shell
docker pull mysql:5.7
```

æè¿°ä¿¡æ¯ï¼š

```shell
//åˆ†å±‚ä¸‹è½½ï¼Œå·²å­˜åœ¨åˆ™ä¸é‡å¤ä¸‹è½½
5.7: Pulling from library/mysql
8559a31e96f4: Already exists
d51ce1c2e575: Already exists
....
f7a5433ce20d: Pull complete
3dcd2a278b4a: Pull complete
//ç­¾å
Digest: sha256:32f9d9a069f7a735e28fd44ea....
Status: Downloaded newer image for mysql:5.7
//å®é™…åœ°å€
docker.io/library/mysql:5.7

```

ğŸ”¹ <b>åˆ é™¤</b>

<b>docker rmi [é•œåƒåç§°...|ID...]</b>

    -f,--Force : å¼ºåˆ¶åˆ é™¤

```shell
docker rmi -f 9cfcce23593a
# åˆ é™¤æ‰€æœ‰é•œåƒ
docker rmi -f $(docker images -aq)
```

## 3. å®¹å™¨

ğŸ”¹ <b>å¯åŠ¨</b>

<b>docker run [å‚æ•°] é•œåƒID|é•œåƒåç§°[:TAG]</b>

    --name="" : å®¹å™¨åç§°
    -d        : ä»¥åå°çš„æ–¹å¼å¯åŠ¨
    -it       : äº¤äº’æ–¹å¼è¿è¡Œï¼ˆå¯åŠ¨å®¹å™¨åè¿›å…¥å®¹å™¨æ“ä½œï¼‰
    -p        : æŒ‡å®šç«¯å£
        -p ip:ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£
        -p ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£
        -p å®¹å™¨ç«¯å£
    -P        : éšæœºç«¯å£

```shell
docker run -it centos /bin/bash
# --rm ç”¨äºæµ‹è¯•ï¼Œå…³é—­å³åˆ é™¤ï¼Œdocker ps æ— è®°å½•
docker run -it --rm centos /bin/bash
```
> æ³¨æ„ï¼š
> å½“centosé•œåƒæ²¡æœ‰è¿è¡Œå†…å®¹æ—¶ï¼Œå®¹å™¨å³ä½¿æ˜¯åå°å¯åŠ¨ï¼Œä¹Ÿä¼šè¢«åœæ­¢ã€‚
> nettyä¹Ÿæ˜¯ä¸€æ ·ã€‚
>

ğŸ”¹ <b>é€€å‡º|åœæ­¢</b>

<b>exit</b>
è¯¥å‘½ä»¤å°†é€€å‡ºå®¹å™¨ç•Œé¢åŒæ—¶åœæ­¢å®¹å™¨

<b>å¿«æ·é”®ï¼šCtrl+p+q </b>
ä»…é€€å‡ºå®¹å™¨ä¸åœæ­¢å®¹å™¨

ğŸ”¹ <b>æŸ¥çœ‹</b>

<b>docker ps</b>

    -a : æŸ¥çœ‹æ‰€æœ‰ï¼ˆåŒ…å«å†å²å¯åŠ¨ï¼‰
    -n=? : æ˜¾ç¤ºæœ€è¿‘çš„å®¹å™¨,eg:-n=1
    -q : åªæ˜¾ç¤ºç¼–å·

```shell
docker ps -a
```

ğŸ”¹ <b>åˆ é™¤</b>

<b>docker rm</b>

    -f : å¼ºåˆ¶åˆ é™¤

```shell
//åˆ é™¤æŒ‡å®šçš„å®¹å™¨
docker rm å®¹å™¨id
//åˆ é™¤æ‰€æœ‰å®¹å™¨
docker rm -f $(docker ps -aq)
docker ps -aq | xargs docker rm -f
```

ğŸ”¹ <b>å¯åŠ¨ã€é‡å¯ã€åœæ­¢ã€æ€æ­»</b>

<b>docker start å®¹å™¨id</b>
<b>docker stop å®¹å™¨id</b>
<b>docker restart å®¹å™¨id</b>
<b>docker kill å®¹å™¨id</b>

## 4. å¸¸ç”¨å‘½ä»¤

ğŸ”¹ <b>æäº¤</b>

<b>docker commit å®¹å™¨id ç›®æ ‡é•œåƒå[:TAG]</b>

    -m  ï¼šæäº¤è¯´æ˜ä¿¡æ¯
    -a  : ä½œè€…åç§°

```shell
docker commit -m "update tomcat" -a "xi" e4e7c5efc101 my_tomcat:1.0

//æŸ¥è¯¢æäº¤ç»“æœ
[root@iZuf6505h9bgsfqqmhomj6Z /]# docker images
REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE
my_tomcat             1.0                 398a9379c1db        54 seconds ago      652MB

```

ğŸ”¹ <b>æŸ¥çœ‹æ—¥å¿—</b>

<b>docker logs å®¹å™¨id</b>

    -t : æ—¶é—´æˆ³
    -f : 
    --tail : æ˜¾ç¤ºçš„æ•°é‡

```shell
docker logs -tf --tail 10
```

æµ‹è¯•ï¼š

```shell
docker run -d centos /bin/sh -c "while true;do echo demo_docker;sleep 1;done"

docker logs -tf --tail 10 99a271fc5dc5
```

ğŸ”¹ <b>æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯</b>

<b>docker top å®¹å™¨id</b>

```shell
docker top 99a271fc5dc5
```

ğŸ”¹ <b>æŸ¥çœ‹å®¹å™¨åŸºæœ¬ä¿¡æ¯--å…ƒæ•°æ®</b>

<b>docker inspect å®¹å™¨id</b>

```shell
docker inspect 99a271fc5dc5
```

ğŸ”¹ <b>è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨</b>

<b>æ–¹å¼ä¸€ï¼šdocker exec å®¹å™¨id</b>

    -it äº¤äº’å¼è¿è¡Œ

```shell
docker exec -it 99a271fc5dc5 /bin/bash
```

<b>æ–¹å¼äºŒï¼šdocker attach å®¹å™¨id</b>

```shell
docker attach 99a271fc5dc5
```

> exec : å¼€å¯æ–°ç»ˆç«¯
> attach : è¿›å…¥æ­£åœ¨æ‰§è¡Œçš„ç»ˆç«¯

ğŸ”¹ <b>copyæ–‡ä»¶â€”â€”ä»å®¹å™¨åˆ°ä¸»æœº</b>

<b>docker cp å®¹å™¨id:å®¹å™¨å†…è·¯å¾„ ä¸»æœºè·¯å¾„</b>

```shell
// å°†å®¹å™¨ä¸­/test.c æ–‡ä»¶å¤åˆ¶åˆ° ä¸»æœºçš„/test.c
docker cp 48948a693704:test.c /test.c
```

ğŸ”¹ ç»™é•œåƒæ·»åŠ tag

<b>docker tag é•œåƒid é•œåƒåç§°:tag</b>
