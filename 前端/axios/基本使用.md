# axios

## 1. ç®€ä»‹

åŸºäºpromiseçš„å¯¹ajaxçš„ä¸€ä¸ªå°è£…
ajaxé€‚åˆäºmvc
promiseåˆ™é€‚ç”¨äºmvvm

## 2.ä½¿ç”¨

### 2.1 åŸºæœ¬å†™æ³•

```html
<script src="https:unpkg.com.axios/dist/axios.min.js"></script>
<script>
    axios({
        url:"url",
        method:'get'|'post', //getä¸ºé»˜è®¤æ–¹å¼
        param:{--}  // param:{name:å°æ˜}
                    //ç”¨è¿‡äºgetæ–¹æ³•ä¼ å‚ åŒæ·»åŠ åˆ°urlä¸­
                    //postä½¿ç”¨è¯¥å‚æ•°ï¼ŒåŒæ ·ä¹Ÿæ˜¯å°†å‚æ•°æ·»åŠ åˆ°urlä¸­
        data:{--}  //ç”¨äºpostæ–¹æ³•ä¼ å‚æ•°
    }).then(res=>{
        console.log(res)
    }).catch(err=>{
        console.log(err)
    })
</script>
```

> postä¼ å‚æ³¨æ„ç‚¹:
> å¸¦å‚è¯·æ±‚é»˜è®¤ä¸ºä½¿ç”¨ application/jsonã€‚
> 1.param å¯å®ç°ä¼ å‚ï¼Œä½†å‚æ•°æ·»åŠ åˆ°urlä¸­
> 2.ä½¿ç”¨axios.post('url','data')
> 3.ä½¿ç”¨dataå‚æ•°ï¼Œåç«¯å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚å¦‚Springbootä¸­ä½¿ç”¨@requestBody,å°†jsonè½¬ä¸ºjavaå¯¹è±¡ã€‚

### 2.2 ç®€å†™

#### 2.2.1 get

```html
<script src="https:unpkg.com.axios/dist/axios.min.js"></script>
<script>
    axios.get({
        "url",
        {params:{--}} // {params:{name:å°æ˜}}
    }).then(res=>{
        console.log(res)
    }).catch(err=>{
        console.log(err)
    })
</script>
```

#### 2.2.2 post

```html
<script src="https:unpkg.com.axios/dist/axios.min.js"></script>
<script>
    axios.post({
        "url",
        "data", // "name=å°æ˜&age=20"
        {data}  // {data:{name:'å°æ˜'}}
    }).then(res=>{
        console.log(res)
    }).catch(err=>{
        console.log(err)
    })
</script>
```

## 3.å‘é€å¤šä¸ªè¯·æ±‚

### 3.1 ä½¿ç”¨resæ•°ç»„è·å–å¤šä¸ªè¯·æ±‚ç»“æœ

```html
<script src="https:unpkg.com.axios/dist/axios.min.js"></script>
<script>
    axios.all({
        axios.get(--),
        axios.get(--)
    }).then(res=>{
        console.log(res[0]+res[1])
    }).catch(err=>{
        console.log(err)
    })
</script>
```

### 3.2 ä½¿ç”¨axios.spread()è·å–å¤šä¸ªè¯·æ±‚ç»“æœ

```html
<script src="https:unpkg.com.axios/dist/axios.min.js"></script>
<script>
    axios.all({
        axios.get(--),
        axios.get(--)
    }).then(
        axios.spread((res1,res2)=>{
            console.log(res1+res2)
        })
    }).catch(err=>{
        console.log(err)
    })
</script>
```

## 4. å…¨å±€é…ç½®

å¯å°†å…¬å…±æ•°æ®æå–å‡ºæ¥ï¼Œgetã€postè¯·æ±‚å†…å®¹ä¸­åˆ™æ— éœ€å†å†™è¿™äº›å…¬å…±å†…å®¹ã€‚æ¯”å¦‚æå–urlçš„å…¬å…±éƒ¨åˆ†ã€æå–è¶…æ—¶å‚æ•°ã€‚

```html
<script src="https:unpkg.com.axios/dist/axios.min.js"></script>
<script>
    axios.defaults.baseurl="http://-:8080/person",
    axios.defaults.timeout=3000,
    axios.get('getall').then(res=>{ // == http://-:8080/person/getall
        console.log(res)
    })
    axios.post('update').then(res=>{ // == http://-:8080/person/update
        console.log(res)
    })
</script>
```

## 5. axioså®ä¾‹

```html
<script src="https:unpkg.com.axios/dist/axios.min.js"></script>
<script>
    // å®šä¹‰
    let newVar = axios.create({
        baseURL:'url',
        timeout:5000
    });
    // ä½¿ç”¨
    newVar({
        url:'getAll'
    })

</script>
```

## 6. æ‹¦æˆªå™¨

```html
<script src="https:unpkg.com.axios/dist/axios.min.js"></script>
<script>
   axios.interceptors.request.use(config=>{
       // è¿›å…¥å‰
   },err=>{
       // å‘ç”Ÿé”™è¯¯
   });
</script>
```

## 7. åœ¨vueä¸­è¿›è¡Œæ¨¡å—å°è£…

åŸºäº import-export æ¥è¿›è¡Œå°è£…ï¼Œç±»ä¼¼å‡½æ•°å°è£…

> vueä¸­å®‰è£…axios:
 npm install axios --save

### 7.1 æ— è¿”å›å€¼

ğŸ”¹ å°è£…å†…å®¹ (ä½ç½® : /network/request/request.js):

```js
import axios form 'axios'
export function request(url,success,fail){
    axios({
        url:url
    }).then(res=>{
        success(res)
    }).catch(err=>{
        fail(err)
    })
}
```

ğŸ”¹ è°ƒç”¨:

```js
import {request} form './network/request/request.js'
request(url,res=>{},err=>{})
```

### 7.2 è¿”å›Promiseå¯¹è±¡

Promiseä¸­éœ€å£°æ˜ã€åˆ›å»ºå®ä¾‹.
Promiseä¸ºES6ä¸­çš„è¯­æ³•ç‚¹ï¼Œå…¶å†…å®¹ä»£æŒ‡å³å°†å‘ç”Ÿçš„äº‹ä»¶

ğŸ”¹ å°è£…å†…å®¹ï¼š

```js
import axios form 'axios'
export function request(config){
    return new Promise((resolve,reject)=>{
        //å£°æ˜å®ä¾‹
        let newVar = axios.create({
            baseURL:"url",
            timeout:5000
        });
        //åˆ›å»ºå®ä¾‹
        newVar(config).then(res=>{
            resolve(res)  //reså°†ä½œä¸ºå‚æ•°ä¼ ç»™å›è°ƒå‡½æ•°
        }).catch(err=>{
            reject(err)
        })
    })
}
```

ğŸ”¹ è°ƒç”¨

```js
import {request} form './network/request/request.js'
request({url:'url'}).then(res=>{}).catch(err=>{})
```

### 7.3 è¿”å›å®ä¾‹

æ–¹æ³•å†…å£°æ˜å®ä¾‹ã€‚æœ¬è´¨åŒè¿”å›Promiseå¯¹è±¡

ğŸ”¹ å°è£…å†…å®¹ï¼š

```js
import axios form 'axios'
export function request(config){
    //å£°æ˜å®ä¾‹
    let newVar = axios.create({
        baseURL:"url",
        timeout:5000
    });
    //åˆ›å»ºå®ä¾‹å¹¶è¿”å›
    return newVar(config);
}
```

ğŸ”¹ è°ƒç”¨

```js
import {request} form './network/request/request.js'
request({url:'url'}).then(res=>{}).catch(err=>{})
```
