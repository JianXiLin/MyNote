# å®¹å™¨

## 1. Listã€Mapã€Set

ğŸ”¹ List: ç”¨äºæ’åºã€‚å…ƒç´ æœ‰åºã€å¯é‡å¤ã€‚
&emsp;&emsp;&emsp;&emsp;å®ç°ï¼šObjectæ•°ç»„ | åŒå‘é“¾è¡¨
ğŸ”¹ Mapï¼šç”¨äºæœç´¢ã€‚å­˜å‚¨é”®å€¼å¯¹ã€‚keyä¸å¯é‡å¤ã€‚
&emsp;&emsp;&emsp;&emsp;å®ç°ï¼šæ•°ç»„+é“¾è¡¨ï¼ˆJDK1.8å‰ï¼‰ï¼Œæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼ˆJDK1.8~ï¼‰
ğŸ”¹ Setï¼šæ— é‡å¤ï¼ˆå»é‡ï¼‰ã€‚ä¸å¯é‡å¤ã€‚
&emsp;&emsp;&emsp;&emsp;å®ç°ï¼šä½¿ç”¨Mapä¸­çš„Key

![collections/20200521153005](https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/collections/20200521153005.png?x-oss-process=image/resize,p_100/sharpen,50)
RandomAccessï¼šæ ‡è®°å‹æ¥å£ã€‚è¡¨ç¤ºå¯éšæœºè®¿é—®å…ƒç´ ï¼ˆå¯å¿«é€Ÿè®¿é—®ï¼‰ã€‚

## 2. List

### 2.1 ArrayListã€LinkedList åŒºåˆ«

#### 2.1.1 åº•å±‚å®ç°

ğŸ”¹ ArrayListï¼š<b>æ•°ç»„</b>
ğŸ”¹ LinkedListï¼š<b>åŒå‘é“¾è¡¨ï¼ˆ1.7~ï¼‰</b>ï¼Œ1.7ä¹‹å‰æ˜¯å¾ªç¯é“¾è¡¨ã€‚

å¾ªç¯é“¾è¡¨ç›¸æ¯”åŒå‘é“¾è¡¨çš„ç¼ºç‚¹ï¼š
&emsp;1ï¸âƒ£ åˆå§‹åŒ–æ—¶ï¼Œéœ€å…ˆåˆ›å»ºä¸€ä¸ªç©ºèŠ‚ç‚¹ä½œä¸ºå¤´èŠ‚ç‚¹ï¼Œä»¥é¿å…éœ€è¦å¤šæ¬¡æ ¡éªŒå¤´èŠ‚ç‚¹æ˜¯å¦ä¸ºnullã€‚
&emsp;2ï¸âƒ£ å¤´å°¾éƒ¨èŠ‚ç‚¹ä¸å¤Ÿæ¸…æ™°ï¼Œä¸”åœ¨å¤´å°¾éƒ¨åˆ†è¿›è¡Œå¢åˆ æ—¶ï¼Œéœ€å¤„ç†å¤´å°¾éƒ¨ä¸¤ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚

#### 2.1.2 å¢åˆ å…ƒç´ 

ğŸ”¹ ArrayListï¼šé»˜è®¤æ—¶ï¼Œå¤æ‚åº¦O(1)ã€‚æŒ‡å®šä½ç½®æ—¶ï¼Œå¤æ‚åº¦O(n-i)ã€‚

        å¢åˆ æŸå…ƒç´ å°†å¯¹åç»­å…ƒç´ ä½ç½®äº§ç”Ÿå½±å“ã€‚ä¸æŒ‡å®šä½ç½®åˆ™é»˜è®¤å¢åŠ åˆ°å°¾éƒ¨ã€‚

ğŸ”¹ LinkedList: å¤æ‚åº¦O(1)ã€‚

#### 2.1.3 æŸ¥æ‰¾å…ƒç´ 

ğŸ”¹ ArrayListï¼šå¯å¿«é€ŸæŸ¥è¯¢
ğŸ”¹ LinkedListï¼šéœ€éå†æŸ¥è¯¢

#### 2.1.4 çº¿ç¨‹å®‰å…¨æ€§

ğŸ”¹ ä¸¤è€…éƒ½æ˜¯éçº¿ç¨‹å®‰å…¨çš„

#### 2.1.5 ç©ºé—´å ç”¨

ğŸ”¹ ArrayListï¼šéœ€è¦é¢„ç•™å®¹é‡ç©ºé—´
ğŸ”¹ LinkedListï¼šæ¯ä¸ªèŠ‚ç‚¹éœ€å­˜å‚¨å‰ç»§å’Œåç»­èŠ‚ç‚¹çš„æŒ‡é’ˆ

#### 2.1.6 æ‰©å®¹

ğŸ”¹ ArrayListï¼š<b>+50%</b>,åˆå§‹å€¼10
ğŸ”¹ LinkedListï¼šä¸”æ— éœ€æ‰©å®¹,æ— åˆå§‹å€¼

### 2.2 ArrayListã€Vector åŒºåˆ«

#### 2.2.1 çº¿ç¨‹å®‰å…¨æ€§

ğŸ”¹ ArrayListï¼šéçº¿ç¨‹å®‰å…¨
ğŸ”¹ Vectorï¼šçº¿ç¨‹å®‰å…¨

#### 2.2.2 æ•ˆç‡

ğŸ”¹ ArrayListï¼šæ•ˆç‡æ›´é«˜
ğŸ”¹ Vectorï¼šæ•ˆç‡ä½

    Vectoræ¯ä¸ªæ–¹æ³•éƒ½æ·»åŠ äº†åŒæ­¥ï¼Œå³Synchronizedã€‚å¯¼è‡´æ•ˆç‡ä½ã€‚

#### 2.2.3 æ‰©å®¹

ğŸ”¹ ArrayListï¼š<b>å¢åŠ  50%</b>ï¼Œåˆå§‹å®¹é‡10
ğŸ”¹ Vectorï¼š<b>å¢åŠ  100%</b>ï¼Œåˆå§‹å®¹é‡10

```java
//ArrayListçš„growä¸­çš„å¢åŠ çš„å€¼
int newCapacity = oldCapacity + (oldCapacity >> 1);
```

## 3. Map and Set

### 3.1 HashMap ä¸ HashTable(ä¸ä½¿ç”¨)

#### 3.1.1 åº•å±‚å®ç°

ğŸ”¹ HashMap: <b>æ•°ç»„+çº¢é»‘æ ‘+é“¾è¡¨(1.8~)</b>,1.8å‰æ˜¯æ•°ç»„+é“¾è¡¨
&emsp; jdk1.8ï¼Œä¸ºäº†è§£å†³å“ˆå¸Œå†²çªæ‰€å¸¦æ¥çš„é—®é¢˜ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äºé˜ˆå€¼(é»˜è®¤ä¸º8)ï¼Œä¸”å½“å‰é•¿åº¦ä¸å°äº64ï¼Œåˆ™å°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ã€‚è‹¥é•¿åº¦å°äº64ï¼Œåˆ™æ˜¯è¿›è¡Œæ‰©å®¹ã€‚
ğŸ”¹ HashTable: <b>æ•°ç»„+é“¾è¡¨</b>

#### 3.1.2 çº¿ç¨‹å®‰å…¨æ€§

ğŸ”¹ HashMapï¼š<b>çº¿ç¨‹ä¸å®‰å…¨</b>ã€‚è‹¥éœ€çº¿ç¨‹å®‰å…¨å¯ä½¿ç”¨ConcurrentHashMap
ğŸ”¹ HashTableï¼š<b>çº¿ç¨‹å®‰å…¨</b>ã€‚å‡ ä¹å¤§éƒ¨åˆ†æ–¹æ³•éƒ½åŠ äº†åŒæ­¥

#### 3.1.3 æ•ˆç‡

ğŸ”¹ HashMapï¼šæ•ˆç‡é«˜
ğŸ”¹ HashTableï¼šæ•ˆç‡ä½

#### 3.1.4 æ‰©å®¹

ğŸ”¹ HashMap:å¢åŠ ä¸€å€ã€‚åˆå§‹å€¼ä¸º16ã€‚æ‰©å®¹å› å­é»˜è®¤ä¸º0.75
&emsp;è‹¥æŒ‡å®šå¤§å°æ—¶ï¼Œé•¿åº¦å°†ä¸ºæ¯”è¯¥å€¼ç¨å¤§æˆ–ç­‰äºçš„2çš„å¹‚æ¬¡æ–¹ã€‚è¿™æ˜¯ç”±äºhash%length==hash&(2^n-1)ï¼Œä¸”&çš„æ•ˆç‡é«˜äº%ã€‚
&emsp;eg: æŒ‡å®šå€¼ä¸º50, 50 < 2^6. æ•…å®¹é‡ä¸º2^6=16

ğŸ”¹ HashTable:å¢åŠ ä¸€å€,å†+1.åˆå§‹å€¼ä¸º11

#### 3.1.5 nullå€¼çš„å¤„ç†

ğŸ”¹ HashMap:keyå’Œvalueéƒ½æ”¯æŒnullå€¼ï¼Œkeyä»ä¸å¯é‡å¤
ğŸ”¹ HashTable:æŠ›NullPointerException

### 3.2 HashMap ä¸ HashSet

#### 3.2.1 åº•å±‚å®ç°

HashSetåº•å±‚ä¸HashMapä¸€è‡´ï¼Œå…¶å†…éƒ¨è°ƒç”¨äº†HashMapçš„æ–¹æ³•ã€‚

```java
    //HashSet ä¸­çš„ä»£ç ï¼šå…¶ä¸­çš„æ–¹æ³•å®ç°æ˜¯é€šè¿‡HashMapä»£ç†æ¥å®ç°
    private transient HashMap<E,Object> map;
    private static final Object PRESENT = new Object();

    public int size() {
        return map.size();
    }

    public boolean add(E e) {
        return map.put(e, PRESENT)==null;
    }
```

#### 3.2.2 å¯¹Hashcodeçš„è®¡ç®—

ğŸ”¹ HashMapï¼šæ ¹æ®keyå’Œvalueè¿›è¡Œè¿ç®—
ğŸ”¹ HashSetï¼šæ²¡æœ‰é‡å†™HashCodeæ–¹æ³•ï¼Œvalueå€¼ä»¥ç©ºå¯¹è±¡ä»£æ›¿ã€‚
```java
    //è¯¥èŠ‚ç‚¹ç±»ä¸ºHashMapä¸­å†…éƒ¨ç±»
    static class Node<K, V> implements Entry<K, V> {
         //keyå’Œvalueçš„åœ°å€è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼ˆä¸åŒåˆ™1ï¼Œç›¸åŒåˆ™0ï¼‰
        public final int hashCode() {
            return Objects.hashCode(this.key) ^ Objects.hashCode(this.value);
        }
        public final boolean equals(Object var1) {
            if (var1 == this) {
                return true;
            } else {
                if (var1 instanceof Entry) {
                    Entry var2 = (Entry)var1;
                    if (Objects.equals(this.key, var2.getKey()) && Objects.equals(this.value, var2.getValue())) {
                        return true;
                    }
                }

                return false;
            }
        }
    }
```

### ğŸ“å†…å®¹è¡¥å……ï¼šhashcode() ä¸ equals()

ğŸ”¹ Objectä¸­çš„hashcode()ï¼Œæ˜¯å…³äºå…¶è¯¥å¯¹è±¡å®ä¾‹çš„å†…å­˜åœ°å€ã€‚
ğŸ”¹ Mapä¸­ï¼Œhashcode ç›¸åŒï¼Œequalsä¸ä¸€å®šç›¸ç­‰ï¼Œè¡¨ç¤ºåœ¨åŒä¸€ä¸ªæ•£åˆ—æ•°æ®ç»“æ„ï¼ˆé“¾è¡¨ï¼‰ã€‚equalç›¸ç­‰ï¼Œhashcodeä¸€å®šç›¸ç­‰ã€‚
ğŸ”¹ ç”±äºhashcodeå­˜åœ¨å†²çªï¼Œæ•…éœ€è¦ä½¿ç”¨equalsè¿›è¡Œåˆ¤æ–­ã€‚

### 3.3 ConcurrentHashMap ä¸ HashTable

ä¸¤è€…éƒ½æ˜¯çº¿ç¨‹å®‰å…¨ã€‚HashTableå‡ ä¹æ‰€æœ‰æ–¹æ³•éƒ½æ·»åŠ äº†åŒæ­¥ï¼Œæ•ˆç‡ä½ã€‚
JDK1.7çš„ConcurrentHashMapåˆ™æ˜¯æ¥å–ä»£HashTableã€‚

![collections/20200521144928](https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/collections/20200521144928.png?x-oss-process=image/resize,p_100/sharpen,50)

#### 3.3.1 åº•å±‚å®ç°

ğŸ”¹ ConcurrentHashMapï¼šåŒHashMap
ğŸ”¹ HashTableï¼šæ•°ç»„+é“¾è¡¨

#### 3.3.2 çº¿ç¨‹å®‰å…¨çš„ç­–ç•¥

ğŸ”¹ ConcurrentHashMapï¼š<b>ä½¿ç”¨â€œåˆ†æ®µå¼é”â€</b>ã€‚
&emsp;æ¯ä¸€æ®µæ•°æ®åˆ†åˆ«åŠ é”ã€‚è€Œä¸”åŠ çš„é”æ˜¯ReentrantLockå¯é‡å…¥é”ã€‚
![collections/20200521150144](https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/collections/20200521150144.png?x-oss-process=image/resize,p_70/sharpen,100)
&emsp;[ğŸ‘‰å›¾ç‰‡æ¥æº](https://www.cnblogs.com/chengxiao/p/6842045.html)

ğŸ”¹ HashTableï¼š<b>å¤§éƒ¨åˆ†æ–¹æ³•æ·»åŠ äº†åŒæ­¥</b>ã€‚å¦‚put/getæ–¹æ³•æ·»åŠ äº†Synchronzedã€‚
&emsp;æ•ˆç‡å¾ˆä½ï¼Œè¿‘ä¼¼æ•´ä¸ªå®¹å™¨å¯¹è±¡æ·»åŠ äº†é”ã€‚
![collections/20200521145945](https://jianxi-md-pics.oss-cn-beijing.aliyuncs.com/note-md-imgs/collections/20200521145945.png?x-oss-process=image/resize,p_70/sharpen,100)
&emsp;[ğŸ‘‰å›¾ç‰‡æ¥æº](https://www.cnblogs.com/chengxiao/p/6842045.html)

#### 3.3.4 ConcurrentHashMapé”çš„å®ç°åŸç†
