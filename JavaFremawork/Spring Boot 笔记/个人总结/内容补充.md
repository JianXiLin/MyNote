# SpringBootè¡¥å……

## 1. è‡ªåŠ¨é…ç½®æ–‡ä»¶åŠ è½½

### 1.1. æ–¹æ³•è°ƒç”¨é¡ºåº

```puml
start
:**@EnableAutoConfiguration**;

:å¯¼å…¥**AutoConfigurationImportSelectorç±»**;
note left
é€‰æ‹©å¯¼å…¥è‡ªåŠ¨é…ç½®çš„ç±»
end note

:**selectImports(~)**;
note left
é€‰æ‹©å“ªäº›ç±»æ¥å¯¼å…¥
end note

:**getAutoConfigurationEntry(~)**;
note left
æè¿°ï¼š
    è·å–è‡ªåŠ¨é…ç½®ç±»çš„åˆ—è¡¨ï¼ˆEntryï¼‰
è¿”å›ï¼š
    è‡ªåŠ¨é…ç½®ç±»åˆ—è¡¨
end note

:**getCandidateConfigurations(~)**;
note
è·å–åº”è€ƒè™‘çš„é…ç½®ç±»åç§°
end note

:**åŠ è½½è®°å½•æ–‡ä»¶ï¼Œè·å–è®°å½•çš„ç±»å**;
note left
æè¿°ï¼š
    SpringFactoriesLoader.loadFactoryNames(
        **getSpringFactoriesLoaderFactoryClass()**,
        getBeanClassLoader()
    )
    protected Class<?> **getSpringFactoriesLoaderFactoryClass()** {
        **return EnableAutoConfiguration.class**;
    }
è¿”å›ï¼š
    åº”è€ƒè™‘åŠ å…¥çš„è‡ªåŠ¨é…ç½®ç±»åç§°ã€‚
end note

:**loadSpringFactories(classLoader)**
    **.getOrDefault(factoryTypeName, Collections.emptyList());**;
note left
æè¿°ï¼š
    å°†æ‰€æœ‰jarä¸‹çš„**META-INF/spring.factories**æ–‡ä»¶ä¸­
    **EnableAutoConfiguration.class**ä¸‹çš„ç±»åå€¼
è¿”å›ï¼š
    ç±»å
end note

```

&emsp;SpringBootå¯¼å…¥çš„XXXAutoConfigurationç±»ä¸­ï¼Œé…ç½®çš„å†…å®¹é€šè¿‡propertiesè®¾ç½®ã€‚propertieså‚æ•°åˆ™é€šè¿‡ç±»æ„é€ å™¨æ¥å¼•å…¥ï¼Œç”±äºXXXAutoConfigurationç±»ä¸­åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨ï¼Œæ•…propertieså‚æ•°å†…å®¹æ˜¯ä»å®¹å™¨ä¸­è·å–ã€‚
&emsp;ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“éœ€è¦ä¿®æ”¹æŸåŠŸèƒ½çš„è‡ªåŠ¨é…ç½®å†…å®¹æ—¶ï¼Œåˆ™å¯é€šè¿‡åœ¨SpringBootçš„é…ç½®æ–‡ä»¶propertiesä¸­è®¾ç½®ï¼Œå†…å®¹å°†è¢«æ³¨å…¥å®¹å™¨ã€‚è‡ªåŠ¨é…ç½®ç±»åŠ è½½æ—¶ï¼Œåˆ™ä¼šè¯»å–è¯¥é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Œä»¥æ­¤ä¿®æ”¹è‡ªåŠ¨é…ç½®å†…å®¹ã€‚
&emsp;propertieså¯ä¿®æ”¹çš„å†…å®¹å¯è§XXXAutoConfigurationç±»çš„propertieså‚æ•°ç±»ä¸­çš„å±æ€§åå’Œsetæ–¹æ³•åã€‚
[ğŸ‘‰å®˜æ–¹æ–‡æ¡£ï¼šå¯æ”¹çš„propertieså†…å®¹](https://docs.spring.io/spring-boot/docs/2.0.0.RC1/reference/htmlsingle/[[common-application-properties]])

### 1.2. æ·»åŠ é¢å¤–çš„é…ç½®

é€šè¿‡å‘å®¹å™¨ä¸­æ³¨å…¥XXXConfiguerAdapteræ¥æ‰©å±•
