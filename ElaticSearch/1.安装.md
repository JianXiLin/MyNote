#

## 1. ç®€è¿°

ElaticSearchæ˜¯ä¸€ä¸ªå®æ—¶åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æçš„å¼•æ“ã€‚
ä»¥JSONæ ¼å¼å°†å†…å®¹å­˜å…¥æ–‡æ¡£ï¼Œå¯å‘å¸ƒäºé›†ç¾¤ä¸­ï¼Œå¯è¾¾åˆ°å®æ—¶æœç´¢çš„ç›®çš„ã€‚
åŒæ—¶ESåŸºäºlencesï¼Œä½¿ç”¨äº†å€’æ’ç´¢å¼•çš„æ•°æ®ç»“æ„ï¼Œæ”¯æŒå¿«é€Ÿçš„å…¨æ–‡æœ¬æœç´¢ã€‚

### 1.1. ElaticSearch ä¸ solr

#### ä½¿ç”¨æ–¹å¼ä¸Š

1ï¼‰. ElasticSearchè‡ªå¸¦åˆ†å¸ƒå¼åè°ƒç®¡ç†åŠŸèƒ½ï¼Œsolréœ€å€ŸZookeeperè¿›è¡Œåˆ†å¸ƒå¼ç®¡ç†ã€‚
2ï¼‰. ESä»…æ”¯æŒJSONæ ¼å¼ï¼Œè€ŒSolråˆ™æ”¯æŒJSONã€XMLç­‰æ ¼å¼çš„æ•°æ® 

#### æœç´¢æ•ˆç‡ä¸Š

1ï¼‰. å•çº¯å¯¹å·²æœ‰å°‘é‡æ•°æ®è¿›è¡Œæœç´¢ï¼Œsolræ›´å¿«
2ï¼‰. å¯¹äºå·²å»ºç«‹ç´¢å¼•ï¼ŒElasticSearchåˆ™æ›´å¿«ï¼Œè¿™æ˜¯ç”±äºsolrä¼šäº§ç”Ÿioé˜»å¡
3ï¼‰. å¯¹äºæ•°æ®é‡å¤§ï¼ŒElasticSearchæ›´å¿«

## 2. å®‰è£…

### 2.1. å®‰è£…ElasticSearch

åœ¨å®˜æ–¹ç½‘ç«™ä¸‹è½½ï¼Œè§£å‹å³å¯ä½¿ç”¨

[å®˜æ–¹ç½‘å€ï¼šElasticSearch](https://www.elastic.co/cn/downloads/elasticsearch)

#### 2.1.1 åœ¨dockerä¸­å®‰è£…Elatiscsearch

1ï¼‰.è·å–é•œåƒæ–‡ä»¶

```bash
docker pull elastiscsearch
```

2ï¼‰.å¯åŠ¨eså®¹å™¨ï¼ˆåå°æ–¹å¼è¿è¡Œï¼‰

```bash
docker run -itd --name es \
-p 9200:9200 -p 9300:9300 \
-v /opt/elasticsearch-7.9.1/plugins:/usr/share/elasticsearch/plugins \
-v /opt/elasticsearch-7.9.1/config/custom_elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml \
-v /opt/elasticsearch-7.9.1/data:/usr/share/elasticsearch/data \
-e "discovery.type=single-node" \
-d elasticsearch:7.9.1
```

3ï¼‰.æ‰“å¼€ç½‘ç«™[http://localhost:9200](http://localhost:9200),æ£€æŸ¥è¿è¡Œç»“æœ
æ˜¾ç¤ºelastiscsearchä¿¡æ¯æ—¶ï¼Œåˆ™eså®¹å™¨å¯åŠ¨æˆåŠŸ

#### 2.1.2. éƒ¨åˆ†é…ç½®æ–‡ä»¶

config/log4j2 æ—¥å¿—é…ç½®æ–‡ä»¶
config/jvm.options javaè™šæ‹Ÿæœºé…ç½®
config/elasticsearch.yml åŸºæœ¬é…ç½®æ–‡ä»¶

#### 2.1.3 å¯åŠ¨

é€šè¿‡binç›®å½•ä¸‹çš„elasticsearchå¯æ‰§è¡Œæ–‡ä»¶å¯åŠ¨

#### 2.1.4. Linuxä¸‹è¿è¡ŒElasticsearchçš„é—®é¢˜

[åœ¨Linuxä¸­å› æ–‡ä»¶è®¿é—®æƒé™é™åˆ¶ï¼Œæ— æ³•å¯åŠ¨ElasticSearchçš„è§£å†³æ–¹æ³•ï¼ˆåˆ›å»ºæ–°è§’è‰²å¹¶èµ‹äºˆæ–‡ä»¶æƒé™ï¼‰](./linuxä¸‹å¯åŠ¨ESçš„é—®é¢˜.md)

### 2.2 å®‰è£…Elasticsearchå®¢æˆ·ç«¯

å®‰è£…elasticsearch-head
[githubåœ°å€:https://github.com/mobz/elasticsearch-head](https://github.com/mobz/elasticsearch-head)

#### 2.2.1. å®‰è£…ä¸è¿è¡Œæ­¥éª¤

```bash
git clone git://github.com/mobz/elasticsearch-head.git
cd elasticsearch-head
npm install
npm run start
open http://localhost:9100/
```

#### 2.2.2. è§£å†³esè¿æ¥çš„è·¨åŸŸé—®é¢˜

åœ¨esçš„config/elasticsearch.ymlä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹,å¹¶é‡å¯es

```yml
http.cors.enabled: true
http.cors.allow-origin: "*"
```

### 2.3. å®‰è£…Kibana

æ•°æ®å¯è§†åŒ–å·¥å…·

#### 2.3.1. å®‰è£…

åœ¨å®˜æ–¹ç½‘ç«™ä¸‹è½½ï¼Œè§£å‹å³å¯ä½¿ç”¨
`éœ€è¦ä¸Elasticsearchç‰ˆæœ¬ä¸€è‡´`
[å®˜æ–¹ç½‘å€ï¼šElasticSearch](https://www.elastic.co/cn/downloads/kibana)

ğŸ”¹è®¾ç½®ä¸­æ–‡
ä¿®æ”¹config/kabana.ymlä¸­çš„é…ç½®å³å¯

```yml
i18n.locale: "zh-CN"
```

##### åœ¨dockerä¸­å®‰è£…Kibana

1ï¼‰.åœ¨æœ¬åœ°åˆ›å»ºã€ç¼–è¾‘kibanaé…ç½®æ–‡ä»¶kibana.yml

```yml
server.name: kibana
server.host: "0"
elasticsearch.hosts: [ "http://ä¸»æœºip:9200" ]
monitoring.ui.container.elasticsearch.enabled: true
i18n.locale: "zh-CN"
```

å…¶å®ƒé…ç½®å‚æ•°å‚è€ƒï¼š[ğŸ“—å®˜æ–¹æ–‡æ¡£](https://www.elastic.co/guide/en/kibana/7.9/settings.html)

2). è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆæ˜ å°„ç«¯å£ã€æŒ‚è½½é…ç½®æ–‡ä»¶ï¼‰

```bash
docker run -d --name kibana \
-v /opt/elasticsearch-7.9.1/kibana/kibana.yml:/usr/share/kibana/config/kibana.yml \
-p 5601:5601 \
-d kibana:7.9.1
```

#### 2.3.1. Linuxä¸‹è¿è¡ŒKibanaçš„é—®é¢˜

è§ï¼š[éƒ¨åˆ†é—®é¢˜è§£å†³æ–¹æ³•](./linuxä¸‹ä½¿ç”¨kibanaçš„é—®é¢˜.md)

### 2.4 å®‰è£…ESæ’ä»¶-IKåˆ†è¯å™¨

ä»githubä¸­`cloneä¸‹é¡¹ç›®æºä»£ç `åˆ° eså®‰è£…ç›®å½•/plugins/ik
ä¹Ÿå¯é€šè¿‡esä¸­çš„`elasticsearch-plugin install plugin-url`æ¥å®‰è£…

githubé¡¹ç›®:[medcl/elasticsearch-analysis-ik](https://github.com/medcl/elasticsearch-analysis-ik/releases/tag/v7.9.1)

ğŸ”¹å®‰è£…å‘½ä»¤ï¼š

```bash
./bin/elasticsearch-plugin install \
https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.9.1/elasticsearch-analysis-ik-7.9.1.zip
```

ğŸ”¹æŸ¥çœ‹ä»¥å®‰è£…çš„æ’ä»¶ï¼š

```bash
elasticsearch-plugin list
```
